<script>
    pintrk('track', 'pagevisit', {
    event_id: 'Gallery',
    });
</script>

<section class="hero" style="background-image: url('{{ glide :src="featured_image" width="1920" height="1080" fit="crop_focal" }}')">
</section>

<section class="gallery-info p-6 md:p-12">
    <div class="max-w-6xl mx-auto">
        <p class="space-x-4 text-gray-500 dark:text-gray-300 text-small pb-6"><a href="/galleries">Galleries</a><span>/</span><a href="#">{{ name }}</a></p>
        <div class="flex mt-12 flex-wrap">
            <div class="flex md:flex-col w-full md:flex-1 md:w-auto">
                <div class="flex-1 w-full border-l-2 px-3">
                    <p class="md:text-2xl text-gray-500 dark:text-gray-200">Title</h2>
                    <p class="md:text-2xl lg:text-3xl dark:text-gray-400 md:mt-6 md:mb-12">{{ name }}</p>
                </div>
                <div class="flex-1 w-full border-l-2 px-3">
                    <p class="md:text-2xl text-gray-500 dark:text-gray-200">Role</h2>
                    <p class="md:text-2xl lg:text-3xl dark:text-gray-400 md:mt-6 md:mb-12">{{ role }}</p>
                </div>
                <div class="flex-1 w-full border-l-2 px-3">
                    <p class="md:text-2xl text-gray-500 dark:text-gray-200">Client</h2>
                    <p class="md:text-2xl lg:text-3xl dark:text-gray-400 md:mt-6 ">{{ client }}</p>
                </div>
            </div>
            <div class="mt-12 md:flex-1 dark:text-gray-400">
                {{ content }}
            </div>
        </div>
    </div>
</section>

<section class="p-4 md:p-12">
    {{ if format == "creative" }}
        <div id="creative-gallery-contents" class="flex flex-col max-w-6xl mx-auto relative pb-9">
            {{ photos }}
            <div class="creative-gallery-content">
                <img class="gallery-image" src="{{ glide :src="url" width="1200" height="1200" fit="crop_focal" }}" alt="{{ image:alt }}" @click="showImage = true; imageUrl = event.target.src"">
            </div>
            {{ /photos }}
        </div>
    {{ elseif format == "column" }}
        <div id="column-gallery-contents" class="flex flex-col max-w-6xl mx-auto relative pb-9">
            <div class="row">
                <div id="col1" class="column web-column">
                    {{ photos }}
                    <img class="gallery-image" src="{{ glide :src="url" fit="crop_focal" }}" alt="{{ image:alt }}" @click="showImage = true; imageUrl = event.target.src">
                    {{ /photos }}
                </div>
                <div id="col2" class="column web-column"></div>
                <div id="col3" class="column web-column"></div>
            </div>
        </div>
    {{ else }}
        <div id="grid-gallery-contents" class="flex flex-col max-w-6xl mx-auto relative pb-9">
            <div class="row">
                <div id="col1" class="column web-column">
                    {{ images }}
                        <img class="gallery-image" src="{{ url }}" alt="{{ image:alt }}" @click="showImage = true; imageUrl = event.target.src">
                    {{ /images }}
                </div>
                <div id="col2" class="column web-column"></div>
                <div id="col3" class="column web-column"></div>
            </div>
        </div>
    {{ /if }}
</section>

<script>
    $( document ).ready(function() {
        var start = 3;
        let col1 = document.getElementById("col1");
        let col2 = document.getElementById("col2");
        let col3 = document.getElementById("col3");

        if(col1) {
            $(".gallery-image").each(function() {
                if(!$(this).hasClass("lightbox")) {
                    if(start === 0) { start = 3; }

                    if(start === 3) { col2.appendChild($(this)[0]); }
                    if(start === 2) { col3.appendChild($(this)[0]); }
                    if(start === 1) { col1.appendChild($(this)[0]); }

                    start--;
                }
            });
        }
    });
</script>
